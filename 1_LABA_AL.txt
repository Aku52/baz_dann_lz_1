CREATE TABLE GROUPS (
  ID_GR INT NOT NULL IDENTITY(1,1),
  NAME_GR CHAR(20) NOT NULL,
  COURSE_GR INT NOT NULL,
  
  CONSTRAINT PK_GROUPS PRIMARY KEY (ID_GR))
  
CREATE TABLE STUDENTS (
  ID_ST INT NOT NULL IDENTITY(1,1),
  NAME_ST CHAR(20) NOT NULL,
  SURNAME_ST CHAR(20) NOT NULL,
  T_NAME_ST CHAR(20),
  BIRTH_ST INT NOT NULL,
  GR_ST INT NOT NULL,
  
  CONSTRAINT PK_STUDENTS PRIMARY KEY (ID_ST),
--CONSTRAINT FK_TO_STUDENTS FOREIGN KEY (GR_ST) REFERENCES GROUPS (ID_GR))

TABLE SUBJECTS(
  ID_PRED INT NOT NULL IDENTITY(1,1),
  NAME_PRED CHAR(50) NOT NULL,
  TIME_PRED INT NOT NULL,
  
  CONSTRAINT PK_SUBJECTS PRIMARY KEY (ID_PRED))
  
 TABLE PLAN (
   ID_GR_PLAN INT NOT NULL,
   ID_PRED_PLAN INT NOT NULL,
   
   CONSTRAINT PK_STUDENTS PRIMARY KEY (ID_GR_PLAN ),
   CONSTRAINT PK_STUDENTS PRIMARY KEY (ID_PRED_PLAN),
   
-- CONSTRAINT FK_TO_PLAN_GR FOREIGN KEY (ID_GR_PLAN) REFERENCES GROUPS (ID_GR),
-- CONSTRAINT FK_TO_PLAN_PRED FOREIGN KEY (ID_PRED_PLAN)  SUBJECTS(TIME_PRED))
   
   
ALTER TABLE STUDENTS ADD CONSTRAINT FK_TO_STUDENTS FOREIGN KEY (GR_ST) REFERENCES GROUPS (ID_GR)
ALTER TABLE PLAN ADD CONSTRAINT FK_TO_PLAN_GR FOREIGN KEY (ID_GR_PLAN) REFERENCES GROUPS (ID_GR)
ALTER  TABLE PLAN ADD CONSTRAINT FK_TO_PLAN_PRED FOREIGN KEY (ID_PRED_PLAN) REFERENCES SUBJECTS(TIME_PRED)
  
ALTER TABLE STUDENTS ADD NAME_GR_ST INT    
ALTER TABLE STUDENTS ADD COURSE_GR_ST INT 
ALTER TABLE STUDENTS ADD CONSTRAINT FK_TO_STUDENTS_COURSE FOREIGN KEY (COURSE_GR_ST) REFERENCES GROUPS(COURSE_GR)
ALTER TABLE STUDENTS ADD CONSTRAINT FK_TO_STUDENTS_NAME_GR FOREIGN KEY (NAME_GR_ST) REFERENCES GROUPS(NAME_GR)   

INSERT INTO STUDENTS (NAME_ST,SURNAME_ST, T_NAME_ST , BIRTH_ST, NAME_GR_ST,COURSE_GR_ST ) VALUES
('Федоренко', 'П.', 'Р.', '1997-12-25','ПО135',1),
('Зингел', 'О.', NULL, '1985-12-25','ПО135',1),
('Савицкаян', 'Н.', NULL, '1987-09-22','ПО235',2),
('Ковальчук', 'М.', 'Е.', '1992-06-17', 'ПО235',2),
('Ковриго', 'Т.', 'Р.', '1992-05-13', 'ПО335',3),
('Шарапо', 'Н.', NULL, '1992-08-14','ПО335',3);

SELECT NAME_ST,SURNAME_ST, T_NAME_ST , BIRTH_ST, COURSE_GR_ST FROM STUDENTS 

ALTER TABLE SUBJECTS ADD COURSE_GR_SUB INTO
ALTER  TABLE SUBJECTS ADD CONSTRAINT FK_TO_SUBJECTS_COURSE FOREIGN KEY (COURSE_GR_SUB) REFERENCES GROUPS(COURSE_GR)

INSERT INTO SUBJECTS (NAME_PRED,COURSE_GR_SUB,COURSE_GR_SUB) VALUES
('Физика',1,200),
('Математика',1,120),
('Основы алгоритма',2,70),
('Проектирование БД',2,130),
('Средства визуального программирования',3,90),
('Объектно-ориентированное программирование',3,70);

SELECT NAME_PRED,COURSE_GR_SUB,COURSE_GR_SUB FROM SUBJECTS

UPDATE STUDENTS SET  NAME_GR_ST='ПО135' where NAME_GR_ST=134;
DELETE NAME_GR_ST FROM STUDENTS WHERE NAME_GR_ST='ПО135'
   
UPDATE STUDENTS SET NAME_GR_ST=120 where NAME_PRED='Средства визуального программирования';
UPDATE STUDENTS SET NAME_GR_ST=100 where NAME_PRED='Объектно-ориентированное программирование';
   
ALTER TABLE SUBJECTS ADD CONTROL_SUB INT
INSERT INTO SUBJECTS ( CONTROL_SUB) VALUES
('ЭКЗ'),
('ЭКЗ'),
('ЗАЧ'),
('ЭКЗ'),
('ЭКЗ'),
('ЭКЗ');
   
SELECT NAME_PRED,COURSE_GR_SUB,COURSE_GR_SUB,CONTROL_SUB FROM SUBJECTS

DELETE T_NAME_ST FROM STUDENTS WHERE 

  



  
  